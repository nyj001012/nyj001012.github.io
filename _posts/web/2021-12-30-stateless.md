---
title: "무상태 프로토콜"
excerpt: "HTTP 웹 기본 지식"
category: 
  - web
author_profile: true
sidebar:
  - nav: "main" 
tag:
  - http
  - stateless
toc: true
toc_sticky: true
---
> 이 포스트는 김영한님의 ['모든 개발자를 위한 HTTP 웹 기본 지식'](https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC)을 수강하고 작성하였습니다.  

# 무상태 프로토콜 (Stateless)
- 서버가 클라이언트의 상태를 보존하지 않는다.
- 장점: 서버의 확장성이 높다.(스케일 아웃)
- 단점: 클라이언트가 서버에 추가 데이터를 전송해야 한다.  
> 세션, 쿠키랑 관련이 있을 것 같은 느낌적인 느낌이 든다.

# Stateful vs Stateless
## 상태 유지 (Stateful)
![stateful](/assets/images/page/web/2021-12-30_stateful.png)
- 중간에 다른 서버로 바뀌면 안 된다.
- 중간에 다른 서버로 바뀔 때 상태 정보를 다른 서버에게 미리 알려줘야 한다.
- 만약 통신하던 서버에 장애가 생기면 다른 서버와 처음부터 전부 다시 해야한다...

## 무상태 (Stateless)
![stateless](/assets/images/page/web/2021-12-30_stateless.png)
- 중간에 다른 서버로 바뀌어도 된다.
- 갑자기 클라이언트 요청이 증가해도 서버를 대거 투입할 수 있다.
- 무상태는 응답 서버를 쉽게 바꿀 수 있다. 즉 무한한 서버 증설이 가능하다.
- 통신하던 서버에 장애가 생겨도 요청에 추가 데이터가 모두 들어있기 때문에 상관이 없다.
- 스케일 아웃(수평 확장)에 유리하다. 백엔드의 장비를 수십, 수백 대로 늘릴 수 있다.

# 무상태 프로토콜의 실무 한계
- 모든 것을 무상태로 설계할 수 있는 경우도 있고 없는 경우도 있다.
  - 예1) 무상태 - 로그인이 필요 없는 단순한 서비스 소개 화면
  - 예2) 상태 유지 - 로그인
- 로그인 한 사용자의 경우, 로그인 했다는 상태를 서버에 유지한다.
- 일반적으로 브라우저 쿠키와 서버 세션 등을 사용해서 상태를 유지한다.
- 상태 유지는 최소한만 사용한다.
